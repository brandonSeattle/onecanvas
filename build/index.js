"use strict";var e=require("react"),t=require("prop-types"),n=require("scenejs"),r=require("@daybrush/utils"),i=require("uuid");function a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){c(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=y(n);return f(this,r?(e=y(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?g(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){e=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);t=t.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof e?e:String(e)}!function(e,t){var n,r,t=(t=void 0===t?{}:t).insertAt;"undefined"!=typeof document&&(n=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css","top"===t&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)))}("\n:root {\n  --background: #fff;\n  --font-color: #494949;\n}\n\n#canvasContainer {\n  min-width: 100%;\n  min-height: 100%;\n  position: relative;\n}\n\n.Canvas {\n  font-size: 14px;\n  margin: auto;\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  background: #ebecf0;\n}\n\n.CanvasInner {\n  grid-area: canvas;\n  position: relative;\n  z-index: 0;\n  padding: 10px;\n}\n\n.Composition {\n  position: relative;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n  -webkit-box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  -moz-box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  box-shadow: 0 1px 6px 0 rgb(32 33 36 / 28%);\n  overflow: hidden;\n}\n\n.Layers {\n  pointer-events: none;\n}\n\n/*Player*/\n\n.playerWrapper {\n  position: absolute;\n  bottom: 20px;\n  margin: 0;\n  left: 0;\n  right: 0;\n  z-index: 99999999999;\n  display: flex;\n  justify-content: center;\n}\n\n.playerWrapperInline {\n  position: relative;\n  z-index: 99999999999;\n}\n\n.player {\n  position: relative;\n  align-items: center;\n  display: flex;\n}\n\n.circles .circle {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200px;\n  height: 200px;\n  border: 100px solid black;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.player .play, .player .pause, .player .progress {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.player .play {\n  border-left: 14px solid #333;\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent;\n}\n\n.player .pause {\n  border-left: 4px solid #333;\n  border-right: 4px solid #333;\n  width: 14px;\n  height: 16px;\n  box-sizing: border-box;\n}\n\n.player input[type=range] {\n  flex: auto;\n}\n\n.player input[type=range] {\n  -webkit-appearance: none;\n  background: rgba(0, 0, 0, 0.2);\n  height: 3px;\n  margin-left: 10px;\n}\n\n.player input[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 14px;\n  height: 14px;\n  border-radius: 7px;\n  background: #333;\n}\n\n.player input[type=range]:focus {\n  outline: none;\n}\n");var v=e.createContext(null),w=function(t){var n=t.children,r=t.name,i=t.id,a=t.ratio,l=t.keyframes,s=t.style,u=t.playSpeed,c=t.delay,y=t.iteration,d=e.useContext(v),p=r.replaceAll(" ","_")+i;return e.useEffect(function(){d.newItem(".Layer-".concat(p),{selector:!0,delay:c,playSpeed:u}).set(o(o({},l),{},{options:{delay:c,iteration:y,playSpeed:u}}))},[r,l,y]),e.createElement("div",{"data-testid":"Layer-".concat(p),className:"Layer-".concat(p),style:o({position:"absolute",width:a.width,height:a.height,left:0,right:0,top:0,bottom:0,margin:"auto"},s)},n)},S=(w.defaultProps={name:"animation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},playSpeed:1,delay:0,children:e.createElement("div",null),iteration:"infinite"},w.propTypes={name:t.string,id:t.oneOfType([t.string,t.number]),ratio:t.object,keyframes:t.object,style:t.object,layerStyle:t.object,playSpeed:t.number,delay:t.number||t.string,children:t.any,iteration:t.any},function(){d(a,n);var i=m(a);function a(e){var t;return l(this,a),(t=i.call(this)).isPlayMedia=!0,t.init(e),t}return u(a,[{key:"getMediaItem",value:function(){return this.mediaItem}},{key:"getVolume",value:function(){return this.mediaItem.get(0,"volume")}},{key:"setVolume",value:function(e){return this.mediaItem.set(0,"volume",e),this}},{key:"setPlaySpeed",value:function(e){return this.mediaItem.setPlaySpeed(e),this}},{key:"seek",value:function(e,t){var n=this.mediaItem;return n.set(0,"seek",e),n.set("100%","seek",t),n.setDuration(t-e),this}},{key:"setElement",value:function(e){return this.mediaItem.setElement(e),this}},{key:"getMediaElement",value:function(){return this.mediaItem.getElements()[0]}},{key:"getInfo",value:function(){var e=this.mediaItem,t=[e.get(0,"seek"),e.get("100%","seek")],e=e.getPlaySpeed(),n=this.getVolume(),r=this.getDelay();return{url:this.url,seek:t,playSpeed:e,delay:r,volume:n}}},{key:"init",value:function(e){var t,c=this,y=this.newItem("media"),d=(y.newFrame(0),y.newFrame(1),y.set(0,"volume",1),y.set(0,"seek",0),y.set("100%","seek",0),this.mediaItem=y,r.isString(e)?((t=new Audio).src=e,this.setElement(t),this.url=e):(e.src?this.url=e.src:(t=e.querySelector("[src]"),this.url=t?t.src:""),this.setElement(e)),0);this.on("paused",function(e){var t;c.isPlayMedia=!1,null!=(t=c.getMediaElement())&&t.pause()}),this.on("animate",function(e){var t=c.getMediaElement(),n=(t.muted=!1,e.time),r=n<d,i="running"===c.getPlayState(),a=-1<c.getDirection().indexOf("reverse"),o=c.isPlayMedia,e=e.frames.media,l=y.getPlaySpeed(),s=c.getDuration(),u=c.getVolume(),e=e.get("seek");d=n,i&&o||(t.playbackRate=l*(a?-1:1),t.currentTime=e),r||n<=0||s<=n?i&&(c.isPlayMedia=!1,t.pause()):(t.volume=u,!o&&i&&(c.isPlayMedia=!0,(l=t.play())instanceof Promise)&&l.catch(function(){t.muted=!0,t.play()}))})}}]),a}()),x=function(){d(r,n);var t=m(r);function r(){var e;return l(this,r),(e=t.call(this)).playInfos={},e}return u(r,[{key:"addMedia",value:function(e){var t=new S(1<arguments.length&&void 0!==arguments[1]?arguments[1]:e);return this.setItem(e,t),t}},{key:"getInfo",value:function(){var t={duration:0,medias:[]};return this.forEach(function(e){t.medias.push(e.getInfo())}),t.duration=this.getDuration(),t}}]),r}(),k=function(t){var n=t.name,r=t.id,i=t.audio,a=t.volume,o=t.playSpeed,l=t.delay,s=t.seekStart,u=t.seekEnd,c=e.useContext(v);return e.useEffect(function(){var e=new x,t=c.getDuration(),e=e.addMedia(n+r,i);e.setVolume(a).setPlaySpeed(o).setDelay(l),0<u?e.seek(s,u):e.seek(0,t),c.setItem("media",e)},[s,u]),e.createElement(e.Fragment,null)},j=(k.defaultProps={name:"audio",id:1,audio:"http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.02.mp3",volume:1,playSpeed:1,delay:0,seekStart:0,seekEnd:0},k.propTypes={name:t.string,id:t.number,volume:t.number,audio:t.string,playSpeed:t.number,delay:t.number||t.string,seekStart:t.number,seekEnd:t.number},function(t){var n=t.name,r=t.id,i=(t.ratio,t.img),a=t.keyframes,l=t.style,s=t.playSpeed,u=t.delay,c=t.iteration,y=e.useContext(v),d=n.replaceAll(" ","_")+r;return e.useEffect(function(){y.newItem(".ImageLayer-".concat(d),{selector:!0,delay:u,playSpeed:s}).set(o(o({},a),{},{options:{easing:"ease-in-out",delay:u,iteration:c,playSpeed:s}}))},[n,a,c]),e.createElement("div",{"data-testid":"ImageLayer-".concat(d),className:"ImageLayer-".concat(d),style:o(o({},l),{},{backgroundImage:"url("+i+")",backgroundRepeat:"no-repeat"})})}),E=(j.defaultProps={name:"imageAnimation",id:1,ratio:{width:1080,height:720},img:"https://assets2.razerzone.com/images/pnx.assets/618c0b65424070a1017a7168ea1b6337/razer-wallpapers-page-hero-mobile.jpg",keyframes:{},style:{},playSpeed:1,delay:0,iteration:"infinite"},j.propTypes={name:t.string,id:t.oneOfType([t.string,t.number]),ratio:t.object,img:t.string,keyframes:t.object,style:t.object,layerStyle:t.object,playSpeed:t.number,delay:t.number||t.string,iteration:t.any},function(t){var n=t.name,r=t.id,p=t.ratio,a=t.keyframes,l=t.style,s=t.playSpeed,f=t.delay,u=t.iteration,c=t.foreground,m=t.gridX,g=t.gridY,y=e.useContext(v),b=n.replaceAll(" ","_")+r,t=h(e.useState([]),2),r=t[0],d=t[1],w=(e.useEffect(function(){y.newItem(".Layer-".concat(b),{selector:!0,delay:f,playSpeed:s}).set(o(o({},a),{},{options:{delay:f,iteration:u,playSpeed:s}})),d(w(c))},[n,a,u]),function(t){for(var n=[],r=0;r<m;r++)for(var a=0;a<g;a++){var o=p.width/m*101/p.width+"%",l=p.height/g*100/p.height+"%",s=p.height/g*a*101/p.height+"%",u=p.width/m*r*100/p.width+"%",c=-p.width/m*r+"px",y=-p.height/g*a+"px",d=i.v4().replaceAll("-","");n.push(e.createElement(j,{key:d,img:t,name:"foreground"+b+r+a,delay:f+r,id:r+a,keyframes:{0:{transform:"translate(0, -100%)"},.5:{transform:"translate(0, 0)"}},iteration:1,style:{top:s,left:u,width:o,height:l,position:"absolute",backgroundPosition:c+" "+y,backgroundSize:p.width+"px"},ratio:{width:o,height:l}}))}return n});return e.createElement("div",{"data-testid":"Layer-".concat(b),className:"Layer-".concat(b),id:"Layer-".concat(b),style:o({position:"absolute",width:p.width,height:p.height,left:0,right:0,top:0,bottom:0,margin:"auto"},l)},r)}),I=(E.defaultProps={name:"splitAnimation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},playSpeed:1,delay:0,iteration:"infinite",foreground:"",gridX:5,gridY:1},E.propTypes={name:t.string,id:t.oneOfType([t.string,t.number]),ratio:t.object,keyframes:t.object,style:t.object,layerStyle:t.object,playSpeed:t.number,delay:t.number||t.string,iteration:t.any,foreground:t.string,gridX:t.number,gridY:t.number},function(t){var n=t.name,r=t.id,S=t.ratio,a=t.keyframes,x=t.keyframesImage,k=t.keyframesText,l=t.style,E=t.textLayerStyle,I=t.text,s=t.playSpeed,u=t.delay,O=t.splitDelay,c=t.iteration,y=t.foreground,d=e.useContext(v),P=n.replaceAll(" ","_")+r,t=h(e.useState([]),2),r=t[0],p=t[1],f=(e.useEffect(function(){d.newItem(".Layer-".concat(P),{selector:!0,delay:u,playSpeed:s}).set(o(o({},a),{},{options:{delay:u,iteration:c,playSpeed:s}})),p(f(y))},[n,a,c]),function(t){for(var n=[],r=0,a=0,l=0,s=0,u=0;u<4;u++)for(var c=0;c<3;c++){var y=S.width/4*100/S.width+"%",d=S.height/3*100/S.height+"%",p=S.height/3*c*100/S.height+"%",f=S.width/4*u*100/S.width+"%",h=-S.width/4*u+"px",m=-S.height/3*c+"px",g=i.v4().replaceAll("-",""),b=1===u&&1===c||2===u&&1===c?{2:{opacity:0}}:{};1===u&&1===c&&(r=p,a=f,s=d),2===u&&1===c&&(l=2*parseInt(y)+"%"),n.push(e.createElement(j,{key:g,img:t,name:"foreground"+P+u+c,delay:O,id:u+c,keyframes:o(o({},x),b),iteration:1,style:{top:p,left:f,width:y,height:d,position:"absolute",backgroundPosition:h+" "+m,backgroundSize:"center center"},ratio:{width:y,height:d}}))}var v=i.v4().replaceAll("-","");return n.push(e.createElement(w,{key:v,ratio:S,id:v,name:"fade in text",delay:2*O,style:{margin:0,top:r,left:a,width:l,height:s,position:"absolute",transform:"scale(75%)"},keyframes:k,iteration:1},e.createElement("div",{style:o({fontSize:30,display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},E)},I))),n});return e.createElement("div",{"data-testid":"Layer-".concat(P),className:"Layer-".concat(P),id:"Layer-".concat(P),style:o({position:"absolute",width:S.width,height:S.height,left:0,right:0,top:0,bottom:0,margin:"auto"},l)},r)}),O=(I.defaultProps={name:"splitOutAnimation",id:1,ratio:{width:1080,height:720},keyframes:{},keyframesImage:{},keyframesText:{},style:{},textLayerStyle:{},text:"Hello There .....",playSpeed:1,delay:0,splitDelay:0,iteration:"infinite",foreground:""},I.propTypes={name:t.string,id:t.oneOfType([t.string,t.number]),ratio:t.object,keyframes:t.object,keyframesImage:t.object,keyframesText:t.object,style:t.object,textLayerStyle:t.object,text:t.string,playSpeed:t.number,delay:t.oneOfType([t.string,t.number]),splitDelay:t.oneOfType([t.string,t.number]),iteration:t.any,foreground:t.string},function(t){var n=t.name,r=t.id,S=t.ratio,a=t.keyframes,l=t.style,x=t.textLayerStyle,k=t.text,s=t.playSpeed,E=t.delay,I=t.sliceDelay,u=t.iteration,c=t.foreground,O=t.gridX,P=t.gridY,y=e.useContext(v),C=n.replaceAll(" ","_")+r,t=h(e.useState([]),2),r=t[0],d=t[1],p=(e.useEffect(function(){y.newItem(".Layer-".concat(C),{selector:!0,delay:E,playSpeed:s}).set(o(o({},a),{},{options:{delay:E,iteration:u,playSpeed:s}})),d(p(c))},[n,a,u]),function(t){for(var n=[],r=0,a=0,l=0,s=0,u=0;u<O;u++)for(var c=u%2==0?98:100,y=0;y<P;y++){var d=S.width/O*c/S.width+"%",p=S.height/P*95/S.height+"%",f=S.height/P*y*100/S.height+"%",h=S.width/O*u*100/S.width+"%",m=-S.width/O*u+"px",g=-S.height/P*y+"px",b=i.v4().replaceAll("-","");n.push(e.createElement(j,{key:b,img:t,name:"foreground"+C+u+y,delay:E*y,id:u+y,keyframes:{0:{opacity:1,transform:"translate(".concat(y%2==0?"200%":"-200%",", 0)")},2:{opacity:1,transform:"translate(0, 0)"},4:{opacity:1},4.5:{opacity:0}},iteration:1,style:{top:f,left:h,width:d,height:p,position:"absolute",backgroundPosition:m+" "+g,backgroundSize:S.width+"px"},ratio:{width:d,height:p}})),P-2===y&&(r=f,a=h,l=d,s=p)}var v=i.v4().replaceAll("-","");return n.push(e.createElement(w,{key:v,ratio:S,id:v,name:"fade out text",delay:E+I,style:{margin:0,top:r,left:a,width:l,height:s,position:"absolute",backgroundColor:"#000"},keyframes:{0:{opacity:1,transform:"translate(200%, 0)"},1:{opacity:1,transform:"translate(0, 0)"},2.8:{opacity:1},3:{opacity:0}},iteration:1},e.createElement("div",{style:o({color:"#fff",fontSize:30,display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},x)},k))),n});return e.createElement("div",{"data-testid":"Layer-".concat(C),className:"Layer-".concat(C),id:"Layer-".concat(C),style:o({position:"absolute",width:S.width,height:S.height,left:0,right:0,top:0,bottom:0,margin:"auto"},l)},r)}),P=(O.defaultProps={name:"splitInAnimation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},textLayerStyle:{},text:"Hello There .....",playSpeed:1,delay:0,sliceDelay:0,iteration:"infinite",foreground:"",gridX:5,gridY:1},O.propTypes={name:t.string,id:t.number,ratio:t.object,keyframes:t.object,style:t.object,textLayerStyle:t.object,text:t.string,layerStyle:t.object,playSpeed:t.number,delay:t.number||t.string,sliceDelay:t.number||t.string,iteration:t.any,foreground:t.string,gridX:t.number,gridY:t.number},function(t){var n=t.name,r=t.id,l=t.ratio,i=t.keyframes,a=t.style,s=t.playSpeed,u=t.delay,c=t.iteration,y=t.foreground,d=(t.background,t.gridX),p=e.useContext(v),f=n.replaceAll(" ","_")+r,t=h(e.useState([]),2),r=t[0],m=t[1],g=(e.useEffect(function(){p.newItem(".Layer-".concat(f),{selector:!0,delay:u,playSpeed:s}).set(o(o({},i),{},{options:{delay:u,iteration:c,playSpeed:s}})),m(g(y))},[n,i,c]),function(t){for(var n=[],r=0;r<d;r++){var i=l.width/d*100/l.width+"%",a=l.width/d*r*100/l.width+"%",o=-l.width/d*r+"px";n.push(e.createElement(j,{key:r,img:t,name:"foreground"+f+r,delay:u+r,id:r,keyframes:{0:{opacity:0,transform:"translate(-100%, 0)"},.5:{opacity:1,transform:"translate(0, 0)"}},iteration:1,style:{top:0,left:a,width:i,height:l.height,position:"absolute",zIndex:r,backgroundPosition:o+" 0",backgroundSize:l.width+"px"},ratio:l}))}return n});return e.createElement("div",{"data-testid":"Layer-".concat(f),className:"Layer-".concat(f),id:"Layer-".concat(f),style:o({position:"absolute",width:l.width,height:l.height,left:0,right:0,top:0,bottom:0,margin:"auto"},a)},r)}),C=(P.defaultProps={name:"splitSlideInAnimation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},playSpeed:1,delay:0,iteration:"infinite",foreground:"",gridX:5},P.propTypes={name:t.string,id:t.oneOfType([t.string,t.number]),ratio:t.object,keyframes:t.object,style:t.object,layerStyle:t.object,playSpeed:t.number,delay:t.number||t.string,iteration:t.any,foreground:t.string,gridX:t.number},function(t){var n=t.text,r=t.name,i=t.id,a=t.ratio,l=t.keyframes,s=t.style,u=t.textLayerStyle,c=t.playSpeed,y=t.delay,d=t.iteration,t=t.textColor,p=e.useContext(v),f=r.replaceAll(" ","_")+i;return e.useEffect(function(){p.newItem(".Layer-".concat(f),{selector:!0,delay:y,playSpeed:c}).set(o(o({},l),{},{options:{delay:y,iteration:d,playSpeed:c}}))},[r,l,d]),e.createElement("div",{"data-testid":"Layer-".concat(f),className:"Layer-".concat(f),style:o({position:"absolute",width:a.width,height:a.height,left:0,right:0,top:0,bottom:0,margin:"auto",pointerEvents:"auto",cursor:"default"},s)},e.createElement("div",{style:o({fontSize:30,position:"absolute"},u)},e.createElement("div",{style:{color:t}},n)))});function L(){var e="undefined"!=typeof window?window:{};return{width:e.innerWidth,height:e.innerHeight}}C.defaultProps={name:"textAnimation",id:1,ratio:{width:1080,height:720},keyframes:{},style:{},playSpeed:1,delay:0,text:"Hello Text . . .",iteration:"infinite"},C.propTypes={name:t.string,id:t.oneOfType([t.string,t.number]),ratio:t.object,keyframes:t.object,style:t.object,layerStyle:t.object,textLayerStyle:t.object,playSpeed:t.number,delay:t.number||t.string,text:t.string,iteration:t.any,textColor:t.string};var T=e.forwardRef(function(t,n){function r(e,t,n){var r="".concat(e).length,i=[];n&&i.push(e);for(var a=r;a<t;++a)i.push(0);return n||i.push(e),i.join("")}var i,a,l,s=t.children,u=t.width,c=t.height,y=t.controls,d=t.playing,p=t.fullWidth,f=t.animationDuration,m=t.inline,g=t.CanvasInnerStyle,b=t.CompositionStyle,w=t.playerWrapperStyle,S=t.playerStyle,x=t.playerButtonStyle,k=t.playerTrackStyle,t=t.showTimer,j=e.useContext(v),E=e.useRef(null),I=h(e.useState(!1),2),O=I[0],P=I[1],I=h(e.useState(0),2),C=I[0],T=I[1],I=h(e.useState("00:00"),2),A=I[0],D=I[1],I=(e.useImperativeHandle(n,function(){return{play:function(){j.play()},pause:function(){j.pause()},finish:function(){j.finish()},duration:function(){return j.getDuration()}}}),i=u,a=c,I=h(e.useState(L()),2),n=I[0],l=I[1],e.useEffect(function(){function e(){var e={height:L().height/(16/9),width:L().width/(16/9)};e.scale=Math.min(e.width/i,e.height/a),l(e)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),n),n=I.height,z=I.width,I=I.scale,N=(e.useEffect(function(){var t=j.getDuration();f(t),j.on("play",function(e){P(!0)}),j.on("paused",function(e){P(!1)}),j.on("animate",function(e){T(100*e.time/t),N(e.time)}),d&&d({playing:O,progress:C})},[O,C]),function(e){var t=r(Math.floor(e/60),2),n=r(Math.floor(e%60),2);r(Math.floor(e%1*100),3,!0),D("".concat(t,":").concat(n))});return e.createElement("div",{id:"canvasContainer"},e.createElement("div",{className:m?"":"Canvas",id:"recorderCanvas",ref:E},e.createElement("div",{className:"CanvasInner",style:o(p?{width:"100%",height:"100%"}:{width:z,height:n},g)},e.createElement("div",{id:"Composition",className:"Composition",style:o(p?{width:u,height:c}:{width:u,height:c,transform:"translate(-50%, -50%) scale(".concat(I||1,")")},b)},e.createElement("div",{className:"Layers",style:{width:u,height:c}},s)))),y&&e.createElement("div",{className:m?"playerWrapperInline":"playerWrapper",style:w},e.createElement("div",{className:"player",style:o({width:z},S)},e.createElement("div",{className:"".concat(O?"pause":"play"),style:o({},x),onClick:function(){j.isPaused()?j.play():j.pause()}}),e.createElement("input",{className:"progress",style:o({},k),type:"range",onChange:function(e){j.pause(),j.setTime(e.target.value+"%")},value:C.toString(),min:"0",max:"100"}),t&&e.createElement("span",{style:{marginLeft:10}},A))))}),A=e.forwardRef(function(t,r){var i=t.children,a=t.width,o=t.height,l=t.jsCanva,s=t.controls,u=t.playing,c=t.fullWidth,y=t.animationDuration,d=t.inline,p=t.CanvasInnerStyle,f=t.CompositionStyle,h=t.playerWrapperStyle,m=t.playerStyle,g=t.playerButtonStyle,b=t.playerTrackStyle,t=t.showTimer;return e.createElement(v.Provider,{value:new n({},{easing:n.EASE_IN_OUT,iterationCount:1,selector:!0})},e.createElement(T,{ref:r,height:o,width:a,controls:s,playing:u,jsCanva:l,fullWidth:c,animationDuration:y,inline:d,CanvasInnerStyle:p,CompositionStyle:f,playerWrapperStyle:h,playerStyle:m,playerButtonStyle:g,playerTrackStyle:b,showTimer:t},i))});A.defaultProps={width:1920,height:1080,children:[],controls:!0,playing:function(){},fullWidth:!1,animationDuration:function(){},inline:!1,showTimer:!1},A.propTypes={width:t.number,height:t.number,children:t.any,controls:t.bool,playing:t.func,fullWidth:t.bool,animationDuration:t.func,inline:t.bool,CanvasInnerStyle:t.object,CompositionStyle:t.object,playerWrapperStyle:t.object,playerStyle:t.object,playerButtonStyle:t.object,playerTrackStyle:t.object,showTimer:t.bool},exports.AudioLayer=k,exports.Canvas=A,exports.Layer=w,exports.SplitDownLayer=E,exports.SplitInLayer=O,exports.SplitOutLayer=I,exports.SplitSlideInLayer=P,exports.TextLayer=C;
//# sourceMappingURL=index.js.map
